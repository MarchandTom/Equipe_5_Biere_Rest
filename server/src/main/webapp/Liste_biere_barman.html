<div>
	<div class="container">
        <div class="row col-md-4">
			<div id="listeBieresBrasseur"></div>
			<button type="button" id="acheterBiere" class="btn btn-default btn-block">Acheter une biere</button>
            <button type="button" id="retouraccueil" class="btn btn-default btn-block">Menu</button>
			<div id="bloque">
				<h1>Liste des commandes</h1>
			</div>
			
		</div>
	</div>

<!-- 	<script src="modifDansPages"></script> -->
	<script type="text/javascript">
		$(document).ready(function(){
			$.ajax({
    url: "v1/CmdB",
    data: {
        id: 123
    },
    type: "GET",
    dataType : "json",
    success: function( json ) {

      var tab = JSON.stringify(json);
      var res =JSON.parse(tab);
      var tableau = "";
      tableau +="<tr class =\"w3-green\"> <th> Bno </th><th> Quantité </th><th> Supprimer commande </th></tr>";
      for (var i = 0;i<res.length;i++){
        console.log(res[i].bno);
             tableau +="<tr class =\"w3-white\"><td>"+res[i].bno+"</td><td>"+

             res[i].qte+"</td><td> <button class=\"supress\""+res[i].cno+" onCLick=\"SupprimerCommande("+res[i].cno+")\">Supprimer</button></td></tr>";
             //$("#Commander"+res[i].bno).css("width","100%  ");
    }

        $("<table class=\"w3-table w3-striped w3-bordered\">" + tableau +"</table>").appendTo('#bloque');
      
    },
    // Code to run if the request fails; the raw request and<input type=\"button\" value=\"Commander\" id=\"Commander\""+res[i].bno+"> 
    // status codes are passed to the function
    error: function( xhr, status, errorThrown ) {
        alert( "Sorry, there was a problem!" );
        console.log( "Error: " + errorThrown );
        console.log( "Status: " + status );
        console.dir( xhr );
    },
    // Code to run regardless of success or failure
    complete: function( xhr, status ) {
        console.log( "The request is complete!" );
    }
  });

		});

		/*function listBieres() {
			listUsersGeneric("v1/Biere");
		}


		function listUsersGeneric(url) {
			$.getJSON(url, function(data) {
				afficheListUsers(data);
			});
		}

		function afficheListUsers(data) {
			var ul = document.createElement('ul');
			ul.className = "list-group";
			var index = 0;
			for (index = 0; index < data.length; ++index) {
			    var li = document.createElement('li');
			    li.className = "list-group-item";
				li.innerHTML = data[index].nom;
				ul.appendChild(li);
			}
			$("#listeBieresBarman").html(ul);
		}*/

		function SupprimerCommande(cno){
			$.ajax({
    url: "/v1/CmdB/"+cno,
    type: "DELETE",
    dataType : "json",
			 success: function( json ) {

	 alert("truc supprimé :o");

    },
    // Code to run if the request fails; the raw request and
    // status codes are passed to the function
    error: function( xhr, status, errorThrown ) {
        alert( "Sorry, there was a problem!" );
        console.log( "Error: " + errorThrown );
        console.log( "Status: " + status );
        console.dir( xhr );
    },
    // Code to run regardless of success or failure
    complete: function( xhr, status ) {
        console.log( "The request is complete!" );
    }
  });
		}

		$("#acheterBiere").click(function(event){
			event.preventDefault();
			pageAffichageToutesLesBieres();
		});

		$("#retouraccueil").click(function(event) {
			event.preventDefault();
            retourMenu();
        });

	</script>
</div>
